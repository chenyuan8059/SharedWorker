!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.shareio=t():e.shareio=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e="",t=1;t<=32;t++){e+=Math.floor(16*Math.random()).toString(16),8!=t&&12!=t&&16!=t&&20!=t||(e+="-")}return e}},function(e,t,n){"use strict";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(){this._events=new r,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,u="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(u=!1)),i.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)s.call(e,t)&&n.push(u?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},i.prototype.listeners=function(e,t){var n=u?u+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},i.prototype.emit=function(e,t,n,r,o,i){var s=u?u+e:e;if(!this._events[s])return!1;var a,f,c=this._events[s],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,o),!0;case 6:return c.fn.call(c.context,t,n,r,o,i),!0}for(f=1,a=new Array(l-1);f<l;f++)a[f-1]=arguments[f];c.fn.apply(c.context,a)}else{var h,v=c.length;for(f=0;f<v;f++)switch(c[f].once&&this.removeListener(e,c[f].fn,void 0,!0),l){case 1:c[f].fn.call(c[f].context);break;case 2:c[f].fn.call(c[f].context,t);break;case 3:c[f].fn.call(c[f].context,t,n);break;case 4:c[f].fn.call(c[f].context,t,n,r);break;default:if(!a)for(h=1,a=new Array(l-1);h<l;h++)a[h-1]=arguments[h];c[f].fn.apply(c[f].context,a)}}return!0},i.prototype.on=function(e,t,n){var r=new o(t,n||this),i=u?u+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):(this._events[i]=r,this._eventsCount++),this},i.prototype.once=function(e,t,n){var r=new o(t,n||this,!0),i=u?u+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):(this._events[i]=r,this._eventsCount++),this},i.prototype.removeListener=function(e,t,n,o){var i=u?u+e:e;if(!this._events[i])return this;if(!t)return 0==--this._eventsCount?this._events=new r:delete this._events[i],this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||n&&s.context!==n||(0==--this._eventsCount?this._events=new r:delete this._events[i]);else{for(var a=0,f=[],c=s.length;a<c;a++)(s[a].fn!==t||o&&!s[a].once||n&&s[a].context!==n)&&f.push(s[a]);f.length?this._events[i]=1===f.length?f[0]:f:0==--this._eventsCount?this._events=new r:delete this._events[i]}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=u?u+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new r:delete this._events[t])):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=u,i.EventEmitter=i,e.exports=i},function(e,t,n){e.exports=function(){return new SharedWorker(n.p+"sharedworker.min.js")}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=this;Object.defineProperty(this,"name",{value:e||location.href,writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(this,"guid",{value:(0,a.default)(),writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(this,"datas",{value:{},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(this,"infos",{value:{},writable:!1,configurable:!1,enumerable:!1});var n=new s.default;n.setMaxListeners(100);var r=null,o=window.onbeforeunload||function(){};window.onbeforeunload=function(){t.close(),o.call(window)},this.open=function(){var e=this;r||(r=f(),r.port.name=this.name,r.port.addEventListener("message",function(t){var r=t.data;r.from!==e.guid&&(n.emit(r.type,r.message,{name:r.from,guid:r.guid},e),n.emit("alls",r.message,{name:r.from,guid:r.guid},e))}),r.addEventListener("error",function(t){n.emit("errors",t,e)}),r.port.start(),this.emit({type:"connect"}))},this.close=function(){return r&&(this.emit({type:"close"}),r.port.close(),r=null),this},this.setInfos=function(e,t){if(e){if(e instanceof Object){if(Array.isArray())return;for(var n in e)this.infos[n]=e[n]}else this.infos[e]=t;return this.emit({type:"infos",message:this.infos}),this}},this.emit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";this.open();var n=(e||{}).type||"default";r.port.postMessage({guid:this.guid,from:this.name,to:t,type:n,message:e});return this},this.on=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return n.on(t,e),this},this.ons=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return n.listeners(e)},this.once=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return n.once(t,e),this},this.off=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return n.once(t,e),this},this.offs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return n.removeAllListeners(e),this},this.open()}Object.defineProperty(t,"__esModule",{value:!0}),t.ShareIo=void 0,t.default=function(e){return new o(e)};var i=n(1),s=r(i),u=n(0),a=r(u),f=n(2);t.ShareIo=o}])});